<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imposter</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: fixed;
            width: 100%;
            touch-action: none;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .container {
            width: 100%;
            max-width: 500px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .card {
            flex: 1;
            margin: 20px 20px 100px 20px;
            background: rgba(30, 30, 46, 0.95);
            border-radius: 30px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        .content-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .cover {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #0f3460 0%, #16537e 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: grab;
            z-index: 10;
            user-select: none;
            will-change: transform;
            border-radius: 30px;
        }

        .cover:active {
            cursor: grabbing;
        }

        .cover.snapping {
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .player-header-on-cover {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            padding: 30px 20px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            text-align: center;
            border-radius: 30px 30px 0 0;
        }

        .player-number {
            font-size: 48px;
            font-weight: bold;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .player-number-value {
            display: inline-block;
            padding: 5px 20px;
            border-radius: 15px;
            background: rgba(255, 255, 255, 0.2);
        }

        .player-subtitle {
            font-size: 16px;
            opacity: 0.9;
        }

        .cover-icon {
            font-size: 80px;
            margin-bottom: 20px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .cover-text {
            font-size: 28px;
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .setup-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            z-index: 100;
            transition: opacity 0.5s ease, transform 0.5s ease;
            border-radius: 30px;
        }

        .setup-screen.hidden {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        .setup-title {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
        }

        .top-controls {
            width: 100%;
            max-width: 300px;
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .roles-toggle-compact {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        .roles-left {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .role-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 12px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
        }

        .role-toggle {
            position: relative;
            display: inline-block;
            width: 40px;
            height: 20px;
            flex-shrink: 0;
        }

        .role-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #444;
            transition: .4s;
            border-radius: 20px;
        }

        .role-toggle input:checked + .slider {
            background-color: #4cc9f0;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 14px;
            width: 14px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        .role-toggle input:checked + .slider:before {
            transform: translateX(20px);
        }

        .help-icon {
            width: 18px;
            height: 18px;
            background: rgba(102, 126, 234, 0.3);
            border-radius: 50%;
            color: #667eea;
            font-size: 12px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .help-icon:hover {
            background: rgba(102, 126, 234, 0.5);
            transform: scale(1.1);
        }

        .toggle-label-small {
            font-size: 12px;
            color: #cbd5e0;
            font-weight: 600;
        }

        .toggle-switch-small {
            position: relative;
            width: 40px;
            height: 20px;
            background: #2d3748;
            border-radius: 10px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch-small.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .toggle-slider-small {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch-small.active .toggle-slider-small {
            transform: translateX(20px);
        }

        .names-button-compact {
            flex: 1;
            padding: 8px 12px;
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 10px;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .names-button-compact:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: translateY(-1px);
        }

        .setup-group {
            width: 100%;
            max-width: 300px;
            margin-bottom: 15px;
        }

        .toggle-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 12px;
            margin-top: 8px;
        }

        .toggle-label {
            font-size: 14px;
            color: #cbd5e0;
            font-weight: 600;
        }

        .toggle-switch {
            position: relative;
            width: 50px;
            height: 26px;
            background: #2d3748;
            border-radius: 13px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .toggle-switch.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .toggle-slider {
            position: absolute;
            top: 3px;
            left: 3px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .toggle-switch.active .toggle-slider {
            transform: translateX(24px);
        }

        .names-button {
            width: 100%;
            padding: 12px;
            background: rgba(102, 126, 234, 0.2);
            color: #667eea;
            border: 2px solid #667eea;
            border-radius: 12px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 8px;
        }

        .names-button:hover {
            background: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
        }

        .names-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .names-section {
            width: 100%;
            max-width: 300px;
            margin-top: 20px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            max-height: 300px;
            overflow-y: auto;
        }

        .names-section.hidden {
            display: none;
        }

        .names-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            padding: 40px;
            z-index: 100;
            transition: opacity 0.5s ease, transform 0.5s ease;
            border-radius: 30px;
            overflow-y: auto;
        }

        .names-screen.hidden {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        .names-screen-title {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 30px;
            text-align: center;
        }

        .names-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-bottom: 30px;
        }

        .name-input-group {
            margin-bottom: 15px;
            position: relative;
        }

        .name-input-label {
            font-size: 14px;
            color: #cbd5e0;
            margin-bottom: 5px;
            display: block;
        }

        .name-input-wrapper {
            position: relative;
            display: flex;
            align-items: center;
        }

        .name-input {
            width: 100%;
            padding: 10px 35px 10px 10px;
            font-size: 16px;
            border: 2px solid #2d3748;
            background: #1a202c;
            color: #e2e8f0;
            border-radius: 8px;
            transition: all 0.3s ease;
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }

        .name-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .clear-name-btn {
            position: absolute;
            right: 8px;
            width: 24px;
            height: 24px;
            background: rgba(239, 68, 68, 0.2);
            border: none;
            border-radius: 50%;
            color: #ef4444;
            font-size: 14px;
            cursor: pointer;
            display: none;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .clear-name-btn:hover {
            background: rgba(239, 68, 68, 0.3);
            transform: scale(1.1);
        }

        .name-input-wrapper:hover .clear-name-btn,
        .name-input:focus + .clear-name-btn {
            display: flex;
        }

        .names-actions {
            display: flex;
            gap: 10px;
        }

        .back-button {
            flex: 1;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .back-button:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .roles-help-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            padding: 30px;
            z-index: 100;
            transition: opacity 0.5s ease, transform 0.5s ease;
            border-radius: 30px;
            overflow-y: auto;
        }

        .roles-help-screen.hidden {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        .roles-help-title {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            text-align: center;
        }

        .role-help-card {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid;
        }

        .role-help-card.jester { border-left-color: #f59e0b; }
        .role-help-card.double-agent { border-left-color: #dc2626; }
        .role-help-card.protector { border-left-color: #10b981; }
        .role-help-card.framer { border-left-color: #8b5cf6; }
        .role-help-card.informant { border-left-color: #3b82f6; }
        .role-help-card.paranoid { border-left-color: #f97316; }
        .role-help-card.tourist { border-left-color: #6366f1; }
        .role-help-card.sniper { border-left-color: #dc2626; }
        .role-help-card.lovers { border-left-color: #ec4899; }
        .role-help-card.oracle { border-left-color: #14b8a6; }
        .role-help-card.mimic { border-left-color: #a855f7; }
        .role-help-card.lawyer { border-left-color: #3b82f6; }
        .role-help-card.thief { border-left-color: #f59e0b; }
        .role-help-card.twin { border-left-color: #10b981; }

        .role-help-name {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .role-help-desc {
            font-size: 13px;
            color: #cbd5e0;
            line-height: 1.5;
        }

        .role-help-team {
            font-size: 11px;
            color: #9ca3af;
            margin-top: 5px;
            font-style: italic;
        }

        .setup-label {
            display: block;
            font-size: 16px;
            font-weight: 600;
            color: #cbd5e0;
            margin-bottom: 10px;
        }

        .setup-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #2d3748;
            background: #1a202c;
            color: #e2e8f0;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            -webkit-appearance: none;
            appearance: none;
        }

        .setup-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.3);
        }

        .slider-container {
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .carousel-selector {
            width: 100%;
            height: 80px;
            position: relative;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
            mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
            -webkit-mask-image: linear-gradient(to right, transparent, black 20%, black 80%, transparent);
        }

        .carousel-track {
            position: absolute;
            top: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .carousel-item {
            min-width: 100px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
            color: #4a5568;
            transition: all 0.3s ease;
            cursor: pointer;
            user-select: none;
        }

        .carousel-item.active {
            font-size: 56px;
            color: #667eea;
            transform: scale(1.3);
        }

        .carousel-item:hover {
            color: #9ca3af;
        }

        .carousel-selector::before,
        .carousel-selector::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 2px;
            background: linear-gradient(to bottom, transparent, #667eea, transparent);
            z-index: 10;
        }

        .carousel-selector::before {
            left: calc(50% - 50px);
        }

        .carousel-selector::after {
            right: calc(50% - 50px);
        }

        .word-display {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            padding: 30px 40px 40px;
        }

        .role-info-top {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 20px;
            border: 2px solid;
            width: 100%;
            max-width: 350px;
        }

        .role-info-top.jester { border-color: #f59e0b; }
        .role-info-top.double-agent { border-color: #dc2626; }
        .role-info-top.protector { border-color: #10b981; }
        .role-info-top.framer { border-color: #8b5cf6; }
        .role-info-top.informant { border-color: #3b82f6; }
        .role-info-top.paranoid { border-color: #f97316; }
        .role-info-top.tourist { border-color: #6366f1; }
        .role-info-top.sniper { border-color: #dc2626; }
        .role-info-top.lovers { border-color: #ec4899; }
        .role-info-top.oracle { border-color: #14b8a6; }
        .role-info-top.mimic { border-color: #a855f7; }
        .role-info-top.lawyer { border-color: #3b82f6; }
        .role-info-top.thief { border-color: #f59e0b; }
        .role-info-top.twin { border-color: #10b981; }

        .role-description-compact {
            font-size: 13px;
            color: #cbd5e0;
            line-height: 1.4;
            text-align: center;
        }

        .role-target-compact {
            margin-top: 8px;
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            text-align: center;
        }

        .word-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .word {
            font-size: 56px;
            font-weight: bold;
            color: #e2e8f0;
            text-align: center;
            margin: 0;
        }

        .role-info {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            border: 2px solid;
        }

        .role-info.jester { border-color: #f59e0b; }
        .role-info.double-agent { border-color: #dc2626; }
        .role-info.protector { border-color: #10b981; }
        .role-info.framer { border-color: #8b5cf6; }
        .role-info.informant { border-color: #3b82f6; }
        .role-info.paranoid { border-color: #f97316; }
        .role-info.tourist { border-color: #6366f1; }
        .role-info.sniper { border-color: #dc2626; }
        .role-info.lovers { border-color: #ec4899; }
        .role-info.oracle { border-color: #14b8a6; }
        .role-info.mimic { border-color: #a855f7; }
        .role-info.lawyer { border-color: #3b82f6; }
        .role-info.thief { border-color: #f59e0b; }
        .role-info.twin { border-color: #10b981; }

        .role-title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .role-description {
            font-size: 14px;
            color: #cbd5e0;
            line-height: 1.5;
        }

        .role-target {
            margin-top: 10px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
        }

        .role-badge {
            display: inline-block;
            padding: 10px 25px;
            border-radius: 50px;
            font-weight: bold;
            font-size: 16px;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin: 0;
        }

        .role-citizen {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            color: white;
        }

        .role-imposter {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            color: white;
        }

        .hints {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .hint-tag {
            padding: 10px 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 20px;
            font-size: 18px;
            color: white;
            font-weight: 600;
        }

        .button-area {
            padding: 20px 20px 30px 20px;
            display: flex;
            justify-content: center;
        }

        .next-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .next-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: linear-gradient(135deg, #4a5568 0%, #2d3748 100%);
        }

        .next-button:not(:disabled):hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .next-button:not(:disabled):active {
            transform: translateY(0);
        }

        .end-game-screen {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            z-index: 100;
            transition: opacity 0.5s ease, transform 0.5s ease;
            border-radius: 30px;
        }

        .end-game-screen.hidden {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }

        .end-title {
            font-size: 36px;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
        }

        .end-message {
            font-size: 18px;
            color: #cbd5e0;
            text-align: center;
            margin-bottom: 40px;
        }

        .player-picker {
            font-size: 72px;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 30px;
            animation: pulse 1s ease-in-out infinite;
            text-align: center;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .imposter-list {
            width: 100%;
            max-width: 300px;
            margin-bottom: 30px;
        }

        .imposter-item {
            background: linear-gradient(135deg, #ee0979 0%, #ff6a00 100%);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 12px;
            color: white;
            font-size: 20px;
            font-weight: bold;
            text-align: center;
        }

        .start-button {
            width: 100%;
            max-width: 300px;
            padding: 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .start-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .start-button:active {
            transform: translateY(0);
        }

        .particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            animation: rise linear infinite;
        }

        @keyframes rise {
            to {
                transform: translateY(-100vh);
                opacity: 0;
            }
        }

        .player-color-1 { background: rgba(239, 68, 68, 0.3) !important; }
        .player-color-2 { background: rgba(249, 115, 22, 0.3) !important; }
        .player-color-3 { background: rgba(234, 179, 8, 0.3) !important; }
        .player-color-4 { background: rgba(34, 197, 94, 0.3) !important; }
        .player-color-5 { background: rgba(20, 184, 166, 0.3) !important; }
        .player-color-6 { background: rgba(59, 130, 246, 0.3) !important; }
        .player-color-7 { background: rgba(147, 51, 234, 0.3) !important; }
        .player-color-8 { background: rgba(236, 72, 153, 0.3) !important; }
        .player-color-9 { background: rgba(244, 114, 182, 0.3) !important; }
        .player-color-10 { background: rgba(168, 85, 247, 0.3) !important; }
        .player-color-11 { background: rgba(251, 146, 60, 0.3) !important; }
        .player-color-12 { background: rgba(14, 165, 233, 0.3) !important; }
        .player-color-13 { background: rgba(132, 204, 22, 0.3) !important; }
        .player-color-14 { background: rgba(245, 158, 11, 0.3) !important; }
        .player-color-15 { background: rgba(239, 68, 68, 0.3) !important; }
        .player-color-16 { background: rgba(249, 115, 22, 0.3) !important; }
        .player-color-17 { background: rgba(234, 179, 8, 0.3) !important; }
        .player-color-18 { background: rgba(34, 197, 94, 0.3) !important; }
        .player-color-19 { background: rgba(20, 184, 166, 0.3) !important; }
        .player-color-20 { background: rgba(59, 130, 246, 0.3) !important; }
    </style>
</head>
<body>
    <div class="particles" id="particles"></div>
    
    <div class="container">
        <div class="card">
            <div class="setup-screen" id="setupScreen">
                <div class="setup-title">üïµÔ∏è Imposter</div>
                
                <div class="top-controls">
                    <div class="roles-toggle-compact">
                        <div class="roles-left">
                            <span class="toggle-label-small">Roles</span>
                            <div class="help-icon" id="rolesHelp">?</div>
                        </div>
                        <div class="toggle-switch-small" id="rolesToggle">
                            <div class="toggle-slider-small"></div>
                        </div>
                    </div>
                    <button class="names-button-compact" id="namesButton">Names</button>
                </div>
                
                <div class="setup-group">
                    <label class="setup-label">Number of Players</label>
                    <div class="slider-container">
                        <div class="carousel-selector" id="playerCarousel">
                            <div class="carousel-track" id="playerTrack"></div>
                        </div>
                    </div>
                </div>
                
                <div class="setup-group">
                    <label class="setup-label">Number of Imposters</label>
                    <div class="slider-container">
                        <div class="carousel-selector" id="imposterCarousel">
                            <div class="carousel-track" id="imposterTrack"></div>
                        </div>
                    </div>
                </div>
                
                <button class="start-button" id="startButton">Start Game</button>
            </div>

            <div class="names-screen hidden" id="namesScreen">
                <div class="names-screen-title">üë• Enter Player Names</div>
                <div class="names-grid" id="namesGrid"></div>
                <div class="names-actions">
                    <button class="back-button" id="backButton">Back</button>
                </div>
            </div>

            <div class="roles-help-screen hidden" id="rolesHelpScreen">
                <div class="roles-help-title">üé≠ Special Roles Guide</div>
                
                <div class="role-help-card jester">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="jester" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üÉè</span>
                        <span style="color: #f59e0b;">The Jester</span>
                    </div>
                    <div class="role-help-desc">You know the real word AND the imposters' hint word. Goal: get voted out.</div>
                    <div class="role-help-team">Solo role</div>
                </div>

                <div class="role-help-card double-agent">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="doubleAgent" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üï∂Ô∏è</span>
                        <span style="color: #dc2626;">The Double Agent</span>
                    </div>
                    <div class="role-help-desc">You know the real word but you're secretly helping the imposters.</div>
                    <div class="role-help-team">Imposter team</div>
                </div>

                <div class="role-help-card protector">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="protector" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üõ°Ô∏è</span>
                        <span style="color: #10b981;">The Protector</span>
                    </div>
                    <div class="role-help-desc">You win ONLY if your assigned target is NOT voted out.</div>
                    <div class="role-help-team">Citizen team</div>
                </div>

                <div class="role-help-card framer">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="framer" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üéØ</span>
                        <span style="color: #8b5cf6;">The Framer</span>
                    </div>
                    <div class="role-help-desc">You win if your assigned target IS voted out.</div>
                    <div class="role-help-team">Solo role</div>
                </div>

                <div class="role-help-card informant">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="informant" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üì°</span>
                        <span style="color: #3b82f6;">The Informant</span>
                    </div>
                    <div class="role-help-desc">You know the real word AND the imposters' hint word.</div>
                    <div class="role-help-team">Citizen team</div>
                </div>

                <div class="role-help-card paranoid">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="paranoid" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üò∞</span>
                        <span style="color: #f97316;">The Paranoid</span>
                    </div>
                    <div class="role-help-desc">You see a related word but don't know it's different.</div>
                    <div class="role-help-team">Citizen team</div>
                </div>

                <div class="role-help-card tourist">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="tourist" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üß≥</span>
                        <span style="color: #6366f1;">The Tourist</span>
                    </div>
                    <div class="role-help-desc">You receive NO word at all. Essentially a blind citizen.</div>
                    <div class="role-help-team">Citizen team</div>
                </div>

                <div class="role-help-card sniper">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="sniper" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üéØ</span>
                        <span style="color: #dc2626;">The Sniper</span>
                    </div>
                    <div class="role-help-desc">Imposter. If voted out, guess the real word to steal the win!</div>
                    <div class="role-help-team">Imposter team</div>
                </div>

                <div class="role-help-card oracle">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="oracle" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üîÆ</span>
                        <span style="color: #14b8a6;">The Oracle</span>
                    </div>
                    <div class="role-help-desc">You know the word but your clue must be ONE syllable.</div>
                    <div class="role-help-team">Citizen team</div>
                </div>

                <div class="role-help-card mimic">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="mimic" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üé≠</span>
                        <span style="color: #a855f7;">The Mimic</span>
                    </div>
                    <div class="role-help-desc">No word. Rhyme with or copy the player before you.</div>
                    <div class="role-help-team">Solo/Neutral</div>
                </div>

                <div class="role-help-card lawyer">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="lawyer" checked>
                            <span class="slider"></span>
                        </label>
                        <span>‚öñÔ∏è</span>
                        <span style="color: #3b82f6;">The Lawyer</span>
                    </div>
                    <div class="role-help-desc">Protect one player from being voted out this round.</div>
                    <div class="role-help-team">Citizen team</div>
                </div>

                <div class="role-help-card thief">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="thief" checked>
                            <span class="slider"></span>
                        </label>
                        <span>ü¶π</span>
                        <span style="color: #f59e0b;">The Thief</span>
                    </div>
                    <div class="role-help-desc">You see the imposter hint. Win if imposters win.</div>
                    <div class="role-help-team">Solo/Neutral</div>
                </div>

                <div class="role-help-card twin">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="twin" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üëØ</span>
                        <span style="color: #10b981;">The Twin</span>
                    </div>
                    <div class="role-help-desc">Find your twin. You get a unique hint different from imposters.</div>
                    <div class="role-help-team">Citizen team</div>
                </div>

                <div class="role-help-card lovers">
                    <div class="role-help-name">
                        <label class="role-toggle">
                            <input type="checkbox" class="role-checkbox" data-role="lovers" checked>
                            <span class="slider"></span>
                        </label>
                        <span>üíï</span>
                        <span style="color: #ec4899;">Romeo & Juliet</span>
                    </div>
                    <div class="role-help-desc">Linked pair. Both must survive to win.</div>
                    <div class="role-help-team">Duo team</div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: rgba(102, 126, 234, 0.1); border-radius: 10px; color: #cbd5e0; text-align: center;">
                    <div style="margin-bottom: 8px; font-size: 14px;">Special Role Probability</div>
                    <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <input type="number" id="rolePercentage" value="33" min="0" max="100" 
                            style="width: 60px; background: rgba(0,0,0,0.3); border: 1px solid #667eea; color: white; border-radius: 5px; padding: 5px; text-align: center; font-size: 16px;">
                        <span style="font-size: 18px; font-weight: bold;">%</span>
                    </div>
                    <div style="font-size: 11px; color: #94a3b8; margin-top: 5px;">(Default is 33% or 1/3 of players)</div>
                </div>

                <div class="names-actions" style="margin-top: 20px;">
                    <button class="back-button" id="rolesHelpBack">Back</button>
                </div>
            </div>

            <div class="end-game-screen hidden" id="endGameScreen">
                <div class="end-title">üéÆ All Players Ready!</div>
                <div class="end-message">Random player to start the discussion:</div>
                <div class="player-picker" id="playerPicker">Player 1</div>
                <button class="start-button" id="revealButton">Reveal Imposters</button>
            </div>

            <div class="end-game-screen hidden" id="revealScreen">
                <div class="end-title">üé≠ The Imposters Were...</div>
                <div class="imposter-list" id="imposterList"></div>
                <button class="start-button" id="restartButton">Play Again</button>
            </div>
            
            <div class="content-area">
                <div class="cover" id="cover">
                    <div class="player-header-on-cover">
                        <div class="player-number"><span id="playerNumPrefix">Player </span><span id="playerNum" class="player-number-value">1</span></div>
                        <div class="player-subtitle">Swipe up to reveal</div>
                    </div>
                    
                    <div class="cover-icon">üïµÔ∏è</div>
                    <div class="cover-text">Swipe Up</div>
                </div>
                
                <div class="word-display" id="wordDisplay">
                    <div id="hintContainer"></div>
                </div>
            </div>
            
            <div class="button-area">
                <button class="next-button" id="nextButton">Next Player ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        const gameData = [
            { word: "Ocean", hints: ["Salty", "Deep", "Current", "Tide", "Marine"] },
            { word: "Piano", hints: ["Ivory", "Concert", "Grand", "Strings", "Octave"] },
            { word: "Dragon", hints: ["Legend", "Hoard", "Serpent", "Wyrm", "Medieval"] },
            { word: "Basketball", hints: ["Rebound", "Foul", "Timeout", "Dunk", "Net"] },
            { word: "Telescope", hints: ["Observatory", "Magnify", "Distant", "Galaxy", "Aperture"] },
            { word: "Volcano", hints: ["Dormant", "Vent", "Pumice", "Caldera", "Geothermal"] },
            { word: "Library", hints: ["Catalog", "Overdue", "Reference", "Stacks", "Dewey"] },
            { word: "Rainbow", hints: ["Spectrum", "Refraction", "Arch", "Covenant", "Pot"] },
            { word: "Penguin", hints: ["Colony", "Sliding", "Monochrome", "Emperor", "Krill"] },
            { word: "Lighthouse", hints: ["Sentinel", "Maritime", "Keeper", "Navigation", "Beam"] },
            { word: "Cactus", hints: ["Arid", "Prickly", "Succulent", "Sonoran", "Needles"] },
            { word: "Tornado", hints: ["Vortex", "Alley", "Fujita", "Cyclone", "Debris"] },
            { word: "Chessboard", hints: ["Diagonal", "Endgame", "Gambit", "Rank", "File"] },
            { word: "Vampire", hints: ["Nocturnal", "Coffin", "Garlic", "Stake", "Undead"] },
            { word: "Circus", hints: ["Juggle", "Trapeze", "Ringmaster", "Canvas", "Sawdust"] },
            { word: "Skateboard", hints: ["Ollie", "Kickflip", "Halfpipe", "Bearings", "Concrete"] },
            { word: "Pyramid", hints: ["Giza", "Apex", "Burial", "Sphinx", "Dynasty"] },
            { word: "Dolphin", hints: ["Echolocation", "Pod", "Bottlenose", "Sonar", "Cetacean"] },
            { word: "Compass", hints: ["Cardinal", "Bearing", "Orient", "Lodestone", "True"] },
            { word: "Avalanche", hints: ["Thundering", "Slab", "Backcountry", "Beacon", "Burial"] },
            { word: "Submarine", hints: ["Submerge", "Pressure", "Sonar", "Hull", "Ballast"] },
            { word: "Hammock", hints: ["Siesta", "Woven", "Tropics", "Cocoon", "Netting"] },
            { word: "Chimney", hints: ["Flue", "Soot", "Draft", "Hearth", "Stack"] },
            { word: "Kangaroo", hints: ["Outback", "Joey", "Hop", "Wallaby", "Marsupial"] },
            { word: "Windmill", hints: ["Turbine", "Netherlands", "Gust", "Grain", "Vane"] },
            { word: "Glacier", hints: ["Calving", "Moraine", "Crevasse", "Fjord", "Terminal"] },
            { word: "Accordion", hints: ["Bellows", "Polka", "Squeeze", "Valves", "Reed"] },
            { word: "Scarecrow", hints: ["Guardian", "Effigy", "Harvest", "Stakes", "Clothes"] },
            { word: "Quicksand", hints: ["Viscous", "Saturated", "Bog", "Suction", "Sediment"] },
            { word: "Parachute", hints: ["Ripcord", "Canopy", "Descent", "Harness", "Terminal"] },
            { word: "Coral", hints: ["Polyp", "Bleach", "Atoll", "Barrier", "Skeleton"] },
            { word: "Microscope", hints: ["Specimen", "Magnification", "Slide", "Objective", "Petri"] },
            { word: "Treasure", hints: ["Doubloon", "Loot", "Hoard", "Plunder", "Galleon"] },
            { word: "Eclipse", hints: ["Totality", "Corona", "Umbra", "Syzygy", "Transit"] },
            { word: "Fossil", hints: ["Sediment", "Imprint", "Amber", "Trilobite", "Petrified"] },
            { word: "Origami", hints: ["Crease", "Crane", "Modular", "Kirigami", "Fold"] },
            { word: "Igloo", hints: ["Inuit", "Dome", "Arctic", "Packed", "Dwelling"] },
            { word: "Trampoline", hints: ["Springs", "Rebound", "Aerial", "Canvas", "Elasticity"] },
            { word: "Cobweb", hints: ["Arachnid", "Orb", "Gossamer", "Abandon", "Spiral"] },
            { word: "Chandelier", hints: ["Crystal", "Pendant", "Ornate", "Fixture", "Ballroom"] },
            { word: "Unicorn", hints: ["Tapestry", "Maiden", "Spiral", "Mythical", "Purity"] },
            { word: "Geyser", hints: ["Thermal", "Erupt", "Faithful", "Plume", "Mineral"] },
            { word: "Anchor", hints: ["Weigh", "Mooring", "Nautical", "Fluke", "Rode"] },
            { word: "Sphinx", hints: ["Riddle", "Guardian", "Pharaoh", "Paws", "Enigma"] },
            { word: "Caterpillar", hints: ["Larva", "Molt", "Metamorphosis", "Prolegs", "Chrysalis"] },
            { word: "Waterfall", hints: ["Cascade", "Plunge", "Basin", "Gorge", "Precipice"] },
            { word: "Thermometer", hints: ["Celsius", "Calibrate", "Bulb", "Clinical", "Gauge"] },
            { word: "Mushroom", hints: ["Spore", "Mycelium", "Cap", "Edible", "Toadstool"] },
            { word: "Labyrinth", hints: ["Minotaur", "Theseus", "Winding", "Hedgerow", "Puzzle"] },
            { word: "Hourglass", hints: ["Granules", "Duration", "Invert", "Narrow", "Timer"] },
            { word: "Boomerang", hints: ["Aboriginal", "Aerodynamic", "Trajectory", "Retrieve", "Curved"] },
            { word: "Campfire", hints: ["Kindling", "Embers", "Stories", "S'mores", "Ring"] },
            { word: "Beehive", hints: ["Comb", "Pollen", "Queen", "Hexagonal", "Colony"] },
            { word: "Carousel", hints: ["Merry", "Brass", "Calliope", "Platform", "Revolve"] },
            { word: "Fountain", hints: ["Jet", "Basin", "Wish", "Ornamental", "Spout"] },
            { word: "Meteor", hints: ["Comet", "Shooting", "Atmosphere", "Crater", "Celestial"] },
            { word: "Peacock", hints: ["Plumage", "Iridescent", "Courting", "Ocelli", "Strut"] },
            { word: "Skeleton", hints: ["Marrow", "Vertebrae", "Cranium", "Ossify", "Cartilage"] },
            { word: "Thunderstorm", hints: ["Static", "Cumulonimbus", "Flash", "Boom", "Precipitation"] },
            { word: "Barbershop", hints: ["Shears", "Lather", "Trim", "Stripe", "Quartet"] },
            { word: "Magnet", hints: ["Ferrous", "Dipole", "Attract", "Field", "Lodestone"] },
            { word: "Blizzard", hints: ["Gale", "Whiteout", "Snowdrift", "Conditions", "Advisory"] },
            { word: "Castle", hints: ["Rampart", "Keep", "Parapet", "Siege", "Moat"] },
            { word: "Satellite", hints: ["Geosynchronous", "Telemetry", "Launch", "Relay", "Orbit"] },
            { word: "Jungle", hints: ["Undergrowth", "Biodiversity", "Equatorial", "Canopy", "Humidity"] },
            { word: "Rollercoaster", hints: ["Inversion", "G-force", "Incline", "Thrill", "Rails"] },
            { word: "Anthill", hints: ["Chamber", "Queen", "Foraging", "Excavate", "Mandibles"] },
            { word: "Snowman", hints: ["Frosty", "Spheres", "Twig", "Melt", "Winter"] },
            { word: "Seesaw", hints: ["Fulcrum", "Teeter", "Partner", "Plank", "Pivot"] },
            { word: "Bagpipes", hints: ["Highland", "Tartan", "Drone", "Chanter", "Reed"] },
            { word: "Cobblestone", hints: ["Paved", "Uneven", "Historic", "Carriage", "Stone"] },
            { word: "Watermelon", hints: ["Rind", "Seedless", "Picnic", "Juicy", "Summer"] },
            { word: "Crocodile", hints: ["Basking", "Apex", "Predator", "Nile", "Armored"] },
            { word: "Sandcastle", hints: ["Moat", "Turret", "Bucket", "Tide", "Beach"] },
            { word: "Butterfly", hints: ["Proboscis", "Migration", "Metamorphosis", "Lepidoptera", "Chrysalis"] },
            { word: "Ambulance", hints: ["Trauma", "Medic", "Dispatch", "Gurney", "Sirens"] },
            { word: "Dandelion", hints: ["Wishes", "Puff", "Invasive", "Taproot", "Parachute"] },
            { word: "Toothbrush", hints: ["Bristle", "Cavity", "Hygiene", "Fluoride", "Plaque"] },
            { word: "Sunflower", hints: ["Heliotropism", "Seeds", "Kansas", "Vincent", "Tall"] },
            { word: "Fishbowl", hints: ["Aquarium", "Goldfish", "Circular", "Gravel", "Confined"] },
            { word: "Xylophone", hints: ["Mallet", "Pitch", "Bars", "Percussion", "Diatonic"] },
            { word: "Stopwatch", hints: ["Chronograph", "Precision", "Lap", "Split", "Athletes"] },
            { word: "Camera", hints: ["Exposure", "Aperture", "Shutter", "ISO", "Viewfinder"] },
            { word: "Balloon", hints: ["Inflate", "Latex", "Helium", "Party", "Pop"] },
            { word: "Pumpkin", hints: ["Gourd", "Patch", "Jack", "Pie", "Harvest"] },
            { word: "Dentist", hints: ["Extraction", "Molar", "Filling", "Orthodontist", "Hygienist"] },
            { word: "Saxophone", hints: ["Embouchure", "Alto", "Woodwind", "Jazz", "Reed"] },
            { word: "Spaceship", hints: ["Vessel", "Propulsion", "Interstellar", "Cockpit", "Launch"] },
            { word: "Treehouse", hints: ["Platform", "Hideout", "Canopy", "Nails", "Branches"] },
            { word: "Cello", hints: ["Orchestra", "Bow", "Spike", "Resonance", "Vibrato"] },
            { word: "Moonlight", hints: ["Reflection", "Luminous", "Phase", "Lunar", "Beams"] },
            { word: "Gargoyle", hints: ["Stone", "Cathedral", "Grotesque", "Spout", "Perch"] },
            { word: "Football", hints: ["Gridiron", "Quarterback", "Touchdown", "Pigskin", "Yardage"] },
            { word: "Periscope", hints: ["Submarine", "Prism", "Submerged", "Optics", "Sight"] },
            { word: "Iceberg", hints: ["Calving", "Titanic", "Floating", "Bergy-bit", "Glacial"] },
            { word: "Museum", hints: ["Exhibit", "Artifact", "Gallery", "Curator", "Collection"] },
            { word: "Prism", hints: ["Refract", "Glass", "Spectrum", "Geometry", "Light"] },
            { word: "Polar Bear", hints: ["Arctic", "Tundra", "Marine", "Solitary", "Apex"] },
            { word: "Windvane", hints: ["Direction", "Aerostat", "Breeze", "Rooftop", "Cardinal"] },
            { word: "Bonsai", hints: ["Miniature", "Pruning", "Zen", "Potted", "Ancient"] },
            { word: "Hurricane", hints: ["Cyclone", "Eye", "Saffir", "Surge", "Typhoon"] },
            { word: "Backgammon", hints: ["Doubling", "Pip", "Checker", "Dice", "Point"] },
            { word: "Werewolf", hints: ["Lunar", "Lycanthrope", "Shifter", "Silver", "Full"] },
            { word: "Carnival", hints: ["Midway", "Rides", "Popcorn", "Ferris", "Booth"] },
            { word: "Surfboard", hints: ["Wax", "Fin", "Leash", "Swell", "Break"] },
            { word: "Parthenon", hints: ["Athens", "Marble", "Columns", "Acropolis", "Doric"] },
            { word: "Walrus", hints: ["Tusk", "Blubber", "Pinniped", "Mustache", "Arctic"] },
            { word: "Sundial", hints: ["Shadow", "Gnomon", "Solar", "Clock", "Time"] },
            { word: "Mudslide", hints: ["Debris", "Erosion", "Saturation", "Slope", "Torrent"] },
            { word: "Zodiac", hints: ["Astrology", "Constellation", "Ecliptic", "Sign", "Horoscope"] },
            { word: "Picnic", hints: ["Blanket", "Hamper", "Ants", "Al-fresco", "Outing"] },
            { word: "Fireplace", hints: ["Mantel", "Hearth", "Grate", "Andiron", "Log"] },
            { word: "Platypus", hints: ["Monotreme", "Bill", "Venomous", "Burrow", "Aquatic"] },
            { word: "Watermill", hints: ["Wheel", "Grindstone", "Flume", "Millrace", "River"] },
            { word: "Tundra", hints: ["Permafrost", "Treeless", "Arctic", "Biome", "Lichens"] },
            { word: "Clarinet", hints: ["Ligature", "Bore", "Woodwind", "Keywork", "Reed"] },
            { word: "Statue", hints: ["Sculpture", "Bronze", "Plinth", "Chisel", "Figure"] },
            { word: "Swamp", hints: ["Bayou", "Everglade", "Marsh", "Cypress", "Stagnant"] },
            { word: "Hangglider", hints: ["Airfoil", "Thermal", "Soaring", "Updraft", "Frame"] },
            { word: "Anemometer", hints: ["Velocity", "Wind", "Rotation", "Cups", "Meteorology"] },
            { word: "Apothecary", hints: ["Mortar", "Pestle", "Herbs", "Tincture", "Vial"] },
            { word: "Sarcophagus", hints: ["Stone", "Inscription", "Entomb", "Egyptian", "Relic"] },
            { word: "Supernova", hints: ["Explosion", "Stellar", "Nebula", "Nucleosynthesis", "Collapse"] },
            { word: "Relic", hints: ["Antique", "Sacred", "Venerated", "Ancient", "Remnant"] },
            { word: "Calligraphy", hints: ["Inkwell", "Nib", "Script", "Stroke", "Flourish"] },
            { word: "Tipi", hints: ["Conical", "Lodge", "Hide", "Poles", "Smoke"] },
            { word: "Gymnastics", hints: ["Vault", "Pommel", "Chalk", "Parallel", "Floor"] },
            { word: "Menorah", hints: ["Candles", "Festival", "Branch", "Temple", "Flame"] },
            { word: "Centaur", hints: ["Archer", "Equine", "Hybrid", "Mythology", "Forest"] },
            { word: "Hot Springs", hints: ["Geothermal", "Soak", "Basin", "Sulfur", "Therapeutic"] },
            { word: "Rudder", hints: ["Steering", "Stern", "Vessel", "Control", "Aft"] },
            { word: "Colossus", hints: ["Giant", "Bronze", "Statue", "Rhodes", "Monolith"] },
            { word: "Dragonfly", hints: ["Naiad", "Hover", "Wings", "Darter", "Mandible"] },
            { word: "Riverbed", hints: ["Silt", "Pebbles", "Channel", "Erosion", "Current"] },
            { word: "Hydrometer", hints: ["Density", "Liquid", "Buoyancy", "Scale", "Specific"] },
            { word: "Truffle", hints: ["Underground", "Fungus", "Aromatic", "Forage", "Culinary"] },
            { word: "Laundry Basket", hints: ["Hamper", "Perforated", "Sorting", "Wicker", "Capacity"] },
            { word: "Walmart", hints: ["Rollback", "Supercenter", "Blue-vest", "Greeter", "Retail"] },
            { word: "Car Keys", hints: ["Fob", "Ignition", "RFID", "Keychain", "Tumbler"] },
            { word: "YouTube", hints: ["Subscriber", "Buffer", "Thumbnail", "Algorithm", "Monetize"] },
            { word: "Microwave", hints: ["Magnetron", "Turntable", "Radiation", "Defrost", "Wattage"] },
            { word: "Grocery Cart", hints: ["Wobbly", "Handlebar", "Aisle", "Chassis", "Caster"] },
            { word: "Smartphone", hints: ["Haptic", "OLED", "Interface", "Processor", "Lithium"] },
            { word: "Refrigerator", hints: ["Compressor", "Freon", "Condenser", "Crisper", "Insulated"] },
            { word: "Amazon", hints: ["Prime", "Warehouse", "Logistics", "Cardboard", "Marketplace"] },
            { word: "Dishwasher", hints: ["Racks", "Impeller", "Detergent", "Sanitize", "Cycle"] },
            { word: "Coffee Maker", hints: ["Carafe", "Brew", "Percolate", "Filter", "Drip"] },
            { word: "Netflix", hints: ["Streaming", "Binge", "Autoplay", "Profile", "Originals"] },
            { word: "Backpack", hints: ["Shoulder", "Zipper", "Canvas", "Ergonomic", "Compartment"] },
            { word: "Vacuum", hints: ["Suction", "Canister", "Cyclone", "HEPA", "Agitator"] },
            { word: "Starbucks", hints: ["Barista", "Roast", "Venti", "Caffeine", "Syrup"] },
            { word: "Google", hints: ["Search", "Engine", "Indexing", "Query", "Alphabet"] },
            { word: "Toaster", hints: ["Heating-element", "Lever", "Crumb-tray", "Brownness", "Slot"] },
            { word: "Credit Card", hints: ["Magnetic", "Chip", "CVV", "Limit", "Transaction"] },
            { word: "Doorbell", hints: ["Chime", "Button", "Voltage", "Ringer", "Entrance"] },
            { word: "Headphones", hints: ["Driver", "Wireless", "Noise-cancelling", "Aural", "Bluetooth"] },
            { word: "Remote Control", hints: ["Infrared", "Infrared", "Channel", "Battery", "Signal"] },
            { word: "Washing Machine", hints: ["Agitator", "Spin", "Basin", "Centrifugal", "Load"] },
            { word: "Treadmill", hints: ["Incline", "Belt", "Cardio", "Motorized", "Pace"] },
            { word: "Parking Lot", hints: ["Asphalt", "Space", "Striping", "Stall", "Bollard"] },
            { word: "Selfie Stick", hints: ["Extendable", "Monopod", "Angle", "Bluetooth", "Tourism"] },
            { word: "AirPods", hints: ["Wireless", "Charging-case", "Pairing", "Bluetooth", "Stem"] },
            { word: "Amazon Alexa", hints: ["Assistant", "Speaker", "Voice-command", "Skill", "Smart-home"] },
            { word: "McDonald's", hints: ["Burger", "Drive-thru", "Franchise", "Nuggets", "Clown"] },
            { word: "Starbucks Cup", hints: ["Sleeve", "Cardboard", "Polyethylene", "Logo", "Disposable"] },
            { word: "Vending Machine", hints: ["Coils", "Currency", "Dispense", "Snack", "Refrigerated"] },
            { word: "ATM", hints: ["Transaction", "Withdrawal", "PIN", "Terminal", "Banking"] },
            { word: "Elevator", hints: ["Hoistway", "Counterweight", "Capacity", "Shaft", "Floor"] },
            { word: "Escalator", hints: ["Steps", "Handrail", "Truss", "Continuous", "Landing"] },
            { word: "Keypad", hints: ["Digits", "Entry", "Security", "Input", "Electronic"] },
            { word: "Traffic Light", hints: ["Signal", "Intersection", "Sequence", "Red", "Amber"] },
            { word: "Fire Extinguisher", hints: ["Pressure", "Nozzle", "Chemical", "Safety", "Cylinder"] },
            { word: "Shopping Mall", hints: ["Food-court", "Anchor-store", "Plaza", "Retail", "Concours"] },
            { word: "Parking Meter", hints: ["Coin-slot", "Time-limit", "Enforcement", "Curb", "Digital"] },
            { word: "Coffee Pod", hints: ["Espresso", "Aluminum", "Pressure", "Capsule", "Machine"] },
            { word: "Power Strip", hints: ["Outlets", "Surge", "Cord", "Switch", "Electrical"] },
            { word: "Toilet Paper", hints: ["Ply", "Roll", "Perforated", "Softness", "Bathroom"] },
            { word: "Garden Hose", hints: ["Nozzle", "Vinyl", "Spigot", "Pressure", "Coil"] },
            { word: "Doorstop", hints: ["Wedge", "Rubber", "Friction", "Prop", "Entryway"] },
            { word: "Extension Cord", hints: ["Voltage", "Length", "Plug", "Current", "Insulation"] },
            { word: "Duct Tape", hints: ["Adhesive", "Resin", "Reinforced", "Silver", "Repair"] },
            { word: "Post-it Note", hints: ["Adhesive", "Stationery", "Yellow", "Reminder", "Square"] },
            { word: "Flashlight", hints: ["Lumen", "Reflector", "Battery", "Beam", "LED"] },
            { word: "Umbrella", hints: ["Canopy", "Ribs", "Shaft", "Precipitation", "Handle"] },
            { word: "Waffle Iron", hints: ["Griddle", "Batter", "Honeycomb", "Heating", "Breakfast"] },
            { word: "Target", hints: ["Red-card", "Retail", "Aisle", "Cart", "Discount"] },
            { word: "Lego", hints: ["Interlocking", "Studs", "Plastic", "Minifigure", "Brick"] },
            { word: "Air-Conditioner", hints: ["Refrigerant", "Blower", "Thermostat", "Condensation", "HVAC"] },
            { word: "Electric-Guitar", hints: ["Amplifier", "Pickup", "Fretboard", "Distortion", "Tremolo"] },
            { word: "Calculator", hints: ["Function", "Display", "Scientific", "Arithmetic", "Digit"] },
            { word: "Ziploc-Bag", hints: ["Polyethylene", "Sealant", "Transparent", "Storage", "Airtight"] },
            { word: "Yoga-Mat", hints: ["Traction", "Rubber", "Flexibility", "Padding", "Studio"] },
            { word: "Fire-Alarm", hints: ["Sensor", "Siren", "Safety", "Detector", "Battery"] },
            { word: "Parking-Ticket", hints: ["Violation", "Fine", "Windshield", "Officer", "Ordinance"] },
            { word: "Coffee-Filter", hints: ["Porous", "Percolate", "Paper", "Grinds", "Drip"] },
            { word: "Headlight", hints: ["Illumination", "Halogen", "Beam", "Reflector", "Bulb"] },
            { word: "Supermarket", hints: ["Produce", "Checkout", "Inventory", "Groceries", "Scanner"] },
            { word: "Stapler", hints: ["Binding", "Metal", "Clinch", "Stationery", "Magazine"] },
            { word: "Toothpaste", hints: ["Fluoride", "Abrasive", "Mint", "Tube", "Hygiene"] },
            { word: "Paper-Clip", hints: ["Tension", "Wire", "Loop", "Bundle", "Metal"] },
            { word: "Solar-Panel", hints: ["Photovoltaic", "Renewable", "Silicon", "Grid", "Energy"] },
            { word: "Suitcase", hints: ["Luggage", "Wheels", "Travel", "Packing", "Handle"] },
            { word: "Keyboard", hints: ["QWERTY", "Switch", "Input", "Keycap", "Peripheral"] },
            { word: "Vending-Machine", hints: ["Snack", "Currency", "Dispense", "Coil", "Selection"] },
            { word: "Washing-Machine", hints: ["Agitator", "Spin", "Cycle", "Laundry", "Detergent"] },
            { word: "Dish-Soap", hints: ["Surfactant", "Grease", "Bubbles", "Liquid", "Cleaning"] },
            { word: "Pizza-Box", hints: ["Cardboard", "Delivery", "Grease", "Square", "Insulated"] },
            { word: "Flash-Drive", hints: ["Storage", "USB", "Portable", "Memory", "Digital"] }
        ];

        let currentPlayer = 1;
        let totalPlayers = 6;
        let imposterCount = 2;
        let imposters = [];
        let imposterHint = "";
        let touchStartY = 0;
        let touchCurrentY = 0;
        let isDragging = false;
        let hasRevealed = false;
        let contentHeight = 0;
        let currentGameData = null;
        let rolesEnabled = false;
        let playerNames = {};
        let playerRoles = {};
        let roleAssignments = {};
        
        // Role definitions
        const roles = {
            jester: { name: "The Jester", color: "#f59e0b" },
            doubleAgent: { name: "The Double Agent", color: "#dc2626" },
            protector: { name: "The Protector", color: "#10b981" },
            framer: { name: "The Framer", color: "#8b5cf6" },
            informant: { name: "The Informant", color: "#3b82f6" },
            paranoid: { name: "The Paranoid", color: "#f97316" },
            tourist: { name: "The Tourist", color: "#6366f1" },
            sniper: { name: "The Sniper", color: "#dc2626" },
            lovers: { name: "Romeo & Juliet", color: "#ec4899" },
            oracle: { name: "The Oracle", color: "#14b8a6" },
            mimic: { name: "The Mimic", color: "#a855f7" },
            lawyer: { name: "The Lawyer", color: "#3b82f6" },
            thief: { name: "The Thief", color: "#f59e0b" },
            twin: { name: "The Twin", color: "#10b981" }
        };

        // Synonyms for paranoid role - organized by word
        const synonymWords = {
            "Ocean": ["Sea", "Lake", "Bay"],
            "Piano": ["Keyboard", "Organ", "Synthesizer"],
            "Dragon": ["Beast", "Monster", "Serpent"],
            "Basketball": ["Sports", "Ball", "Game"],
            "Telescope": ["Binoculars", "Scope", "Spyglass"],
            "Volcano": ["Mountain", "Peak", "Crater"],
            "Library": ["Archive", "Study", "Bookstore"],
            "Rainbow": ["Spectrum", "Aurora", "Arc"],
            "Penguin": ["Bird", "Seabird", "Puffin"],
            "Lighthouse": ["Tower", "Beacon", "Watchtower"],
            "Cactus": ["Plant", "Succulent", "Shrub"],
            "Tornado": ["Storm", "Cyclone", "Twister"],
            "Chessboard": ["Board", "Grid", "Checkerboard"],
            "Vampire": ["Monster", "Creature", "Bat"],
            "Circus": ["Show", "Fair", "Carnival"],
            "Skateboard": ["Board", "Deck", "Scooter"],
            "Pyramid": ["Monument", "Structure", "Triangle"],
            "Dolphin": ["Mammal", "Porpoise", "Whale"],
            "Compass": ["Navigator", "Instrument", "Tool"],
            "Avalanche": ["Slide", "Landslide", "Snow"],
            "Submarine": ["Vessel", "Ship", "Boat"],
            "Hammock": ["Bed", "Swing", "Net"],
            "Chimney": ["Flue", "Vent", "Stack"],
            "Kangaroo": ["Animal", "Wallaby", "Marsupial"],
            "Windmill": ["Mill", "Turbine", "Generator"],
            "Glacier": ["Ice", "Iceberg", "Snow"],
            "Accordion": ["Instrument", "Squeeze-box", "Concertina"],
            "Scarecrow": ["Figure", "Dummy", "Effigy"],
            "Quicksand": ["Sand", "Trap", "Bog"],
            "Parachute": ["Canopy", "Glider", "Sail"],
            "Coral": ["Reef", "Organism", "Formation"],
            "Microscope": ["Lens", "Instrument", "Tool"],
            "Treasure": ["Riches", "Loot", "Wealth"],
            "Eclipse": ["Shadow", "Event", "Phenomenon"],
            "Fossil": ["Relic", "Remains", "Artifact"],
            "Origami": ["Art", "Paper", "Craft"],
            "Igloo": ["Shelter", "House", "Dwelling"],
            "Trampoline": ["Bouncer", "Mat", "Platform"],
            "Cobweb": ["Web", "Net", "Thread"],
            "Chandelier": ["Light", "Fixture", "Lamp"],
            "Unicorn": ["Horse", "Creature", "Beast"],
            "Geyser": ["Spring", "Fountain", "Vent"],
            "Anchor": ["Weight", "Hook", "Device"],
            "Sphinx": ["Statue", "Monument", "Guardian"],
            "Caterpillar": ["Larva", "Worm", "Insect"],
            "Waterfall": ["Falls", "Cascade", "Rapids"],
            "Thermometer": ["Gauge", "Instrument", "Measure"],
            "Mushroom": ["Fungus", "Toadstool", "Plant"],
            "Labyrinth": ["Maze", "Puzzle", "Path"],
            "Hourglass": ["Timer", "Clock", "Glass"],
            "Boomerang": ["Tool", "Weapon", "Stick"],
            "Campfire": ["Fire", "Bonfire", "Flame"],
            "Beehive": ["Hive", "Nest", "Colony"],
            "Carousel": ["Ride", "Merry-go-round", "Wheel"],
            "Fountain": ["Water", "Spring", "Feature"],
            "Meteor": ["Rock", "Asteroid", "Comet"],
            "Peacock": ["Bird", "Fowl", "Pheasant"],
            "Skeleton": ["Bones", "Frame", "Structure"],
            "Thunderstorm": ["Storm", "Weather", "Tempest"],
            "Barbershop": ["Shop", "Salon", "Parlor"],
            "Magnet": ["Metal", "Lodestone", "Attractor"],
            "Blizzard": ["Storm", "Snowstorm", "Weather"],
            "Castle": ["Fortress", "Fort", "Palace"],
            "Satellite": ["Device", "Probe", "Orbiter"],
            "Jungle": ["Forest", "Rainforest", "Woods"],
            "Rollercoaster": ["Ride", "Track", "Coaster"],
            "Anthill": ["Mound", "Nest", "Hill"],
            "Snowman": ["Figure", "Sculpture", "Snow"],
            "Seesaw": ["Swing", "Lever", "Teeter-totter"],
            "Bagpipes": ["Instrument", "Pipes", "Woodwind"],
            "Cobblestone": ["Stone", "Paving", "Rock"],
            "Watermelon": ["Fruit", "Melon", "Berry"],
            "Crocodile": ["Reptile", "Alligator", "Predator"],
            "Sandcastle": ["Castle", "Structure", "Sand"],
            "Butterfly": ["Insect", "Moth", "Bug"],
            "Ambulance": ["Vehicle", "Van", "Transport"],
            "Dandelion": ["Flower", "Weed", "Plant"],
            "Toothbrush": ["Brush", "Tool", "Implement"],
            "Sunflower": ["Flower", "Plant", "Bloom"],
            "Fishbowl": ["Bowl", "Tank", "Container"],
            "Xylophone": ["Instrument", "Percussion", "Glockenspiel"],
            "Stopwatch": ["Timer", "Watch", "Clock"],
            "Camera": ["Device", "Recorder", "Tool"],
            "Balloon": ["Ball", "Bubble", "Float"],
            "Pumpkin": ["Gourd", "Squash", "Vegetable"],
            "Dentist": ["Doctor", "Professional", "Specialist"],
            "Saxophone": ["Instrument", "Brass", "Horn"],
            "Spaceship": ["Rocket", "Craft", "Ship"],
            "Treehouse": ["House", "Fort", "Structure"],
            "Cello": ["Violoncello", "Instrument", "Strings"],
            "Moonlight": ["Glow", "Radiance", "Shine"],
            "Gargoyle": ["Statue", "Grotesque", "Figure"],
            "Football": ["Soccer", "Sport", "Ball"],
            "Periscope": ["Scope", "Viewer", "Optics"],
            "Iceberg": ["Berg", "Floe", "Ice"],
            "Museum": ["Archive", "Gallery", "Institution"],
            "Prism": ["Crystal", "Glass", "Polyhedron"],
            "Polar Bear": ["Ursus", "Animal", "Predator"],
            "Windvane": ["Weathercock", "Indicator", "Pointer"],
            "Bonsai": ["Tree", "Shrub", "Plant"],
            "Hurricane": ["Cyclone", "Typhoon", "Tempest"],
            "Backgammon": ["Game", "Board-game", "Table"],
            "Werewolf": ["Lycan", "Wolfman", "Monster"],
            "Carnival": ["Fair", "Festival", "Celebration"],
            "Surfboard": ["Board", "Plank", "Deck"],
            "Parthenon": ["Temple", "Shrine", "Monument"],
            "Walrus": ["Mammal", "Pinniped", "Animal"],
            "Sundial": ["Clock", "Timer", "Indicator"],
            "Mudslide": ["Landslide", "Avalanche", "Slump"],
            "Zodiac": ["Signs", "Circle", "Chart"],
            "Picnic": ["Meal", "Outing", "Lunch"],
            "Fireplace": ["Hearth", "Grate", "Chimney"],
            "Platypus": ["Mammal", "Ornithorhynchus", "Creature"],
            "Watermill": ["Mill", "Wheel", "Grinder"],
            "Tundra": ["Plain", "Steppe", "Wilderness"],
            "Clarinet": ["Woodwind", "Instrument", "Pipe"],
            "Statue": ["Sculpture", "Effigy", "Icon"],
            "Swamp": ["Marsh", "Bog", "Quagmire"],
            "Hangglider": ["Kite", "Aircraft", "Glider"],
            "Anemometer": ["Gauge", "Sensor", "Meter"],
            "Apothecary": ["Pharmacy", "Chemist", "Druggist"],
            "Sarcophagus": ["Coffin", "Tomb", "Casket"],
            "Supernova": ["Explosion", "Star", "Nova"],
            "Relic": ["Remnant", "Antique", "Artifact"],
            "Calligraphy": ["Writing", "Script", "Art"],
            "Tipi": ["Tent", "Lodge", "Shelter"],
            "Gymnastics": ["Acrobatics", "Sport", "Exercise"],
            "Menorah": ["Candelabra", "Lamp", "Candlestick"],
            "Centaur": ["Creature", "Myth", "Hybrid"],
            "Hot Springs": ["Thermal", "Spa", "Bath"],
            "Rudder": ["Helm", "Vane", "Blade"],
            "Colossus": ["Giant", "Behemoth", "Titan"],
            "Dragonfly": ["Insect", "Fly", "Bug"],
            "Riverbed": ["Channel", "Bottom", "Gully"],
            "Hydrometer": ["Gauge", "Meter", "Sensor"],
            "Truffle": ["Fungus", "Mushroom", "Delicacy"],
            "Laundry Basket": ["Hamper", "Bin", "Container"],
            "Walmart": ["Store", "Market", "Retailer"],
            "Car Keys": ["Opener", "Fob", "Access"],
            "YouTube": ["Platform", "Video-site", "Media"],
            "Microwave": ["Oven", "Appliance", "Cooker"],
            "Grocery Cart": ["Trolley", "Wagon", "Basket"],
            "Smartphone": ["Mobile", "Cell", "Device"],
            "Refrigerator": ["Fridge", "Cooler", "Freezer"],
            "Amazon": ["Retailer", "Giant", "Store"],
            "Dishwasher": ["Cleaner", "Appliance", "Washer"],
            "Coffee Maker": ["Machine", "Brewer", "Pot"],
            "Netflix": ["Service", "Streamer", "Network"],
            "Backpack": ["Bag", "Knapsack", "Rucksack"],
            "Vacuum": ["Cleaner", "Hoover", "Suction"],
            "Starbucks": ["Cafe", "Coffeehouse", "Shop"],
            "Google": ["Portal", "Search", "Site"],
            "Toaster": ["Appliance", "Heater", "Cooker"],
            "Credit Card": ["Plastic", "Card", "Payment"],
            "Doorbell": ["Chime", "Buzzer", "Alarm"],
            "Headphones": ["Earphones", "Headset", "Buds"],
            "Remote Control": ["Clicker", "Remote", "Controller"],
            "Washing Machine": ["Washer", "Laundry", "Appliance"],
            "Treadmill": ["Runner", "Machine", "Trainer"],
            "Parking Lot": ["Garage", "Car-park", "Area"],
            "Selfie Stick": ["Pole", "Handle", "Mount"],
            "AirPods": ["Earbuds", "Headphones", "Audio"],
            "Amazon Alexa": ["Assistant", "Echo", "Speaker"],
            "McDonald's": ["Fast-food", "Restaurant", "Eatery"],
            "Starbucks Cup": ["Container", "Vessel", "Tumbler"],
            "Vending Machine": ["Dispenser", "Automat", "Vendor"],
            "ATM": ["Machine", "Bank", "Teller"],
            "Elevator": ["Lift", "Car", "Transport"],
            "Escalator": ["Stairs", "Moving-stairway", "Lift"],
            "Keypad": ["Buttons", "Input", "Interface"],
            "Traffic Light": ["Signal", "Beacon", "Lamp"],
            "Fire Extinguisher": ["Safety-device", "Suppression", "Canister"],
            "Shopping Mall": ["Center", "Plaza", "Galleria"],
            "Parking Meter": ["Timer", "Device", "Collector"],
            "Coffee Pod": ["Capsule", "Filter", "Packet"],
            "Power Strip": ["Adapter", "Multi-plug", "Surge-protector"],
            "Toilet Paper": ["Tissue", "Roll", "Paper"],
            "Garden Hose": ["Pipe", "Tube", "Line"],
            "Doorstop": ["Wedge", "Block", "Buffer"],
            "Extension Cord": ["Lead", "Wire", "Cable"],
            "Duct Tape": ["Tape", "Adhesive", "Binder"],
            "Post-it Note": ["Stationery", "Sticky-note", "Memo"],
            "Flashlight": ["Torch", "Lantern", "Light"],
            "Umbrella": ["Parasol", "Cover", "Brolly"],
            "Waffle Iron": ["Grill", "Maker", "Appliance"],
            "Target": ["Store", "Shop", "Retailer"],
            "Lego": ["Blocks", "Bricks", "Toys"],
            "Air-Conditioner": ["Cooler", "AC", "Unit"],
            "Electric-Guitar": ["Instrument", "Guitar", "Axe"],
            "Calculator": ["Machine", "Device", "Computer"],
            "Ziploc-Bag": ["Pouch", "Bag", "Container"],
            "Yoga-Mat": ["Pad", "Rug", "Surface"],
            "Fire-Alarm": ["Buzzer", "Alert", "Warning"],
            "Parking-Ticket": ["Citation", "Notice", "Penalty"],
            "Coffee-Filter": ["Strainer", "Screen", "Paper"],
            "Headlight": ["Lamp", "Light", "Lantern"],
            "Supermarket": ["Grocery", "Mart", "Store"],
            "Stapler": ["Fastener", "Binder", "Tool"],
            "Toothpaste": ["Dentifrice", "Gel", "Paste"],
            "Paper-Clip": ["Fastener", "Wire", "Clip"],
            "Solar-Panel": ["Collector", "Cell", "Array"],
            "Suitcase": ["Bag", "Trunk", "Valise"],
            "Keyboard": ["Board", "Input-device", "Typewriter"],
            "Vending-Machine": ["Dispenser", "Vendor", "Automat"],
            "Washing-Machine": ["Washer", "Laundry-unit", "Appliance"],
            "Dish-Soap": ["Detergent", "Cleaner", "Degreaser"],
            "Pizza-Box": ["Carton", "Container", "Case"],
            "Flash-Drive": ["Stick", "Thumb-drive", "Storage"]
        };

        function getPlayerDisplay(playerNum) {
            if (playerNames[playerNum]) {
                return playerNames[playerNum];
            }
            return `Player ${playerNum}`;
        }

        function hasAnyNames() {
            return Object.values(playerNames).some(name => name && name.trim());
        }
        
        // Carousel state
        let playerCarouselIndex = 3; // Start at 6 (index 3 in 3-20 range)
        let imposterCarouselIndex = 1; // Start at 2 (index 1 in 1-10 range)
        let playerCarouselStartY = 0;
        let imposterCarouselStartY = 0;
        let playerCarouselDragging = false;
        let imposterCarouselDragging = false;
        
        // Initialize carousels
        function initCarousels() {
            const playerTrack = document.getElementById('playerTrack');
            const imposterTrack = document.getElementById('imposterTrack');
            
            // Create player carousel items (3-20)
            for (let i = 3; i <= 20; i++) {
                const item = document.createElement('div');
                item.className = 'carousel-item';
                item.textContent = i;
                item.dataset.value = i;
                playerTrack.appendChild(item);
            }
            
            // Create imposter carousel items (1-10)
            for (let i = 1; i <= 10; i++) {
                const item = document.createElement('div');
                item.className = 'carousel-item';
                item.textContent = i;
                item.dataset.value = i;
                imposterTrack.appendChild(item);
            }
            
            updateCarousel('player');
            updateCarousel('imposter');
            setupCarouselListeners();
        }
        
        function updateCarousel(type) {
            const track = type === 'player' ? document.getElementById('playerTrack') : document.getElementById('imposterTrack');
            const index = type === 'player' ? playerCarouselIndex : imposterCarouselIndex;
            const items = track.children;
            const carousel = type === 'player' ? document.getElementById('playerCarousel') : document.getElementById('imposterCarousel');
            
            // Calculate offset to center the selected item
            const carouselWidth = carousel.clientWidth;
            const offset = (carouselWidth / 2) - (index * 100) - 50; // 50 is half of item width
            track.style.transform = `translateX(${offset}px)`;
            
            // Update active state
            for (let i = 0; i < items.length; i++) {
                if (i === index) {
                    items[i].classList.add('active');
                } else {
                    items[i].classList.remove('active');
                }
            }
            
            // Update values
            if (type === 'player') {
                totalPlayers = parseInt(items[index].dataset.value);
            } else {
                imposterCount = parseInt(items[index].dataset.value);
            }
        }
        
        function setupCarouselListeners() {
            const playerCarousel = document.getElementById('playerCarousel');
            const imposterCarousel = document.getElementById('imposterCarousel');
            
            // Player carousel
            playerCarousel.addEventListener('wheel', (e) => {
                e.preventDefault();
                if (e.deltaY > 0 || e.deltaX > 0) {
                    playerCarouselIndex = (playerCarouselIndex + 1) % 18;
                } else {
                    playerCarouselIndex = (playerCarouselIndex - 1 + 18) % 18;
                }
                updateCarousel('player');
            });
            
            let playerStartX = 0;
            playerCarousel.addEventListener('touchstart', (e) => {
                playerStartX = e.touches[0].clientX;
                playerCarouselDragging = true;
            });
            
            playerCarousel.addEventListener('touchmove', (e) => {
                if (!playerCarouselDragging) return;
                const deltaX = e.touches[0].clientX - playerStartX;
                if (Math.abs(deltaX) > 50) {
                    if (deltaX < 0) {
                        playerCarouselIndex = (playerCarouselIndex + 1) % 18;
                    } else {
                        playerCarouselIndex = (playerCarouselIndex - 1 + 18) % 18;
                    }
                    updateCarousel('player');
                    playerStartX = e.touches[0].clientX;
                }
            });
            
            playerCarousel.addEventListener('touchend', () => {
                playerCarouselDragging = false;
            });
            
            // Mouse drag for player carousel
            let playerMouseDown = false;
            let playerMouseStartX = 0;
            
            playerCarousel.addEventListener('mousedown', (e) => {
                playerMouseDown = true;
                playerMouseStartX = e.clientX;
            });
            
            playerCarousel.addEventListener('mousemove', (e) => {
                if (!playerMouseDown) return;
                const deltaX = e.clientX - playerMouseStartX;
                if (Math.abs(deltaX) > 50) {
                    if (deltaX < 0) {
                        playerCarouselIndex = (playerCarouselIndex + 1) % 18;
                    } else {
                        playerCarouselIndex = (playerCarouselIndex - 1 + 18) % 18;
                    }
                    updateCarousel('player');
                    playerMouseStartX = e.clientX;
                }
            });
            
            playerCarousel.addEventListener('mouseup', () => {
                playerMouseDown = false;
            });
            
            playerCarousel.addEventListener('mouseleave', () => {
                playerMouseDown = false;
            });
            
            // Imposter carousel
            imposterCarousel.addEventListener('wheel', (e) => {
                e.preventDefault();
                if (e.deltaY > 0 || e.deltaX > 0) {
                    imposterCarouselIndex = (imposterCarouselIndex + 1) % 10;
                } else {
                    imposterCarouselIndex = (imposterCarouselIndex - 1 + 10) % 10;
                }
                updateCarousel('imposter');
            });
            
            let imposterStartX = 0;
            imposterCarousel.addEventListener('touchstart', (e) => {
                imposterStartX = e.touches[0].clientX;
                imposterCarouselDragging = true;
            });
            
            imposterCarousel.addEventListener('touchmove', (e) => {
                if (!imposterCarouselDragging) return;
                const deltaX = e.touches[0].clientX - imposterStartX;
                if (Math.abs(deltaX) > 50) {
                    if (deltaX < 0) {
                        imposterCarouselIndex = (imposterCarouselIndex + 1) % 10;
                    } else {
                        imposterCarouselIndex = (imposterCarouselIndex - 1 + 10) % 10;
                    }
                    updateCarousel('imposter');
                    imposterStartX = e.touches[0].clientX;
                }
            });
            
            imposterCarousel.addEventListener('touchend', () => {
                imposterCarouselDragging = false;
            });
            
            // Mouse drag for imposter carousel
            let imposterMouseDown = false;
            let imposterMouseStartX = 0;
            
            imposterCarousel.addEventListener('mousedown', (e) => {
                imposterMouseDown = true;
                imposterMouseStartX = e.clientX;
            });
            
            imposterCarousel.addEventListener('mousemove', (e) => {
                if (!imposterMouseDown) return;
                const deltaX = e.clientX - imposterMouseStartX;
                if (Math.abs(deltaX) > 50) {
                    if (deltaX < 0) {
                        imposterCarouselIndex = (imposterCarouselIndex + 1) % 10;
                    } else {
                        imposterCarouselIndex = (imposterCarouselIndex - 1 + 10) % 10;
                    }
                    updateCarousel('imposter');
                    imposterMouseStartX = e.clientX;
                }
            });
            
            imposterCarousel.addEventListener('mouseup', () => {
                imposterMouseDown = false;
            });
            
            imposterCarousel.addEventListener('mouseleave', () => {
                imposterMouseDown = false;
            });
        }
        
        // Toggle roles
        document.getElementById('rolesToggle').addEventListener('click', function() {
            rolesEnabled = !rolesEnabled;
            this.classList.toggle('active');
        });

        // Roles help button
        document.getElementById('rolesHelp').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('rolesHelpScreen').classList.remove('hidden');
        });

        // Roles help back button
        document.getElementById('rolesHelpBack').addEventListener('click', function() {
            document.getElementById('rolesHelpScreen').classList.add('hidden');
        });

        // Names button - go to names screen
        document.getElementById('namesButton').addEventListener('click', function() {
            generateNameInputs();
            document.getElementById('namesScreen').classList.remove('hidden');
        });

        // Back button - return to setup
        document.getElementById('backButton').addEventListener('click', function() {
            document.getElementById('namesScreen').classList.add('hidden');
        });

        function generateNameInputs() {
            const namesGrid = document.getElementById('namesGrid');
            namesGrid.innerHTML = '';
            
            for (let i = 1; i <= totalPlayers; i++) {
                const inputGroup = document.createElement('div');
                inputGroup.className = 'name-input-group';
                
                const label = document.createElement('label');
                label.className = 'name-input-label';
                label.textContent = `Player ${i}`;
                
                const wrapper = document.createElement('div');
                wrapper.className = 'name-input-wrapper';
                
                const input = document.createElement('input');
                input.className = 'name-input';
                input.type = 'text';
                input.placeholder = `Enter name for Player ${i}`;
                input.value = playerNames[i] || '';
                input.dataset.player = i;
                
                const clearBtn = document.createElement('button');
                clearBtn.className = 'clear-name-btn';
                clearBtn.innerHTML = '√ó';
                clearBtn.type = 'button';
                
                clearBtn.addEventListener('click', () => {
                    input.value = '';
                    playerNames[i] = '';
                });
                
                input.addEventListener('input', (e) => {
                    const playerNum = parseInt(e.target.dataset.player);
                    playerNames[playerNum] = e.target.value.trim();
                });
                
                wrapper.appendChild(input);
                wrapper.appendChild(clearBtn);
                inputGroup.appendChild(label);
                inputGroup.appendChild(wrapper);
                namesGrid.appendChild(inputGroup);
            }
        }
        
        function initGame() {
            currentGameData = gameData[Math.floor(Math.random() * gameData.length)];
            
            imposters = [];
            while (imposters.length < imposterCount) {
                const randomPlayer = Math.floor(Math.random() * totalPlayers) + 1;
                if (!imposters.includes(randomPlayer)) {
                    imposters.push(randomPlayer);
                }
            }
            
            imposterHint = currentGameData.hints[Math.floor(Math.random() * currentGameData.hints.length)];
            
            // Assign roles if enabled
            playerRoles = {};
            roleAssignments = {};
            if (rolesEnabled) {
                assignRoles(imposterHint);
            }
            
            setupPlayer();
            createParticles();
            
            const contentArea = document.querySelector('.content-area');
            contentHeight = contentArea.clientHeight;
        }

        function assignRoles(imposterHint) {
            // 1. Calculate how many special roles to hand out
            const percentInput = document.getElementById('rolePercentage');
            const percentage = percentInput ? parseInt(percentInput.value) : 33;
            let roleCount = Math.max(1, Math.floor(totalPlayers * (percentage / 100)));

            // 2. Separate players into two pools: Imposters and Citizens
            const imposterPool = [...imposters]; 
            const citizenPool = [];
            for (let i = 1; i <= totalPlayers; i++) {
                if (!imposters.includes(i)) {
                    citizenPool.push(i);
                }
            }

            // 3. Get and shuffle enabled roles
            const enabledCheckboxes = document.querySelectorAll('.role-checkbox:checked');
            let roleTypes = Array.from(enabledCheckboxes).map(cb => cb.dataset.role);
            if (roleTypes.length === 0) roleTypes = ['jester'];
            
            // Shuffle roles
            for (let i = roleTypes.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [roleTypes[i], roleTypes[j]] = [roleTypes[j], roleTypes[i]];
            }

            let rolesAssigned = 0;
            let loversAssigned = false;
            let twinsAssigned = [];

            // 4. Assign roles using the shuffled roleTypes list
            for (let roleType of roleTypes) {
                if (rolesAssigned >= roleCount) break;

                // --- CASE A: Roles that MUST go to Imposters (Sniper) ---
                if (roleType === 'sniper') {
                    const availableImps = imposterPool.filter(p => !playerRoles[p]);
                    if (availableImps.length > 0) {
                        const targetImp = availableImps[Math.floor(Math.random() * availableImps.length)];
                        playerRoles[targetImp] = 'sniper';
                        rolesAssigned++;
                    }
                } 
                
                // --- CASE B: Roles that involve 2 players (Lovers/Twins) ---
                // These MUST only pull from the Citizen Pool to protect the Imposter count
                else if ((roleType === 'lovers' || roleType === 'twin') && citizenPool.filter(p => !playerRoles[p]).length >= 2) {
                    const pool = citizenPool.filter(p => !playerRoles[p]);
                    const p1 = pool[0];
                    const p2 = pool[1];

                    playerRoles[p1] = roleType;
                    playerRoles[p2] = roleType;
                    roleAssignments[p1] = p2;
                    roleAssignments[p2] = p1;

                    if (roleType === 'twin') {
                        const nonImposterHints = currentGameData.hints.filter(h => h !== imposterHint);
                        roleAssignments[`twinHint`] = nonImposterHints[Math.floor(Math.random() * nonImposterHints.length)];
                    }
                    rolesAssigned += 2;
                }

                // --- CASE C: Standard Roles (Jester, Oracle, etc.) ---
                // These MUST only pull from the Citizen Pool
                else {
                    const availableCits = citizenPool.filter(p => !playerRoles[p]);
                    if (availableCits.length > 0) {
                        const targetCit = availableCits[0];
                        playerRoles[targetCit] = roleType;
                        
                        // Handle targets for Protector/Framer
                        if (roleType === 'protector' || roleType === 'framer') {
                            const possibleTargets = Array.from({length: totalPlayers}, (_, i) => i + 1).filter(p => p !== targetCit);
                            roleAssignments[targetCit] = possibleTargets[Math.floor(Math.random() * possibleTargets.length)];
                        }
                        rolesAssigned++;
                    }
                }
            }
        }

        function setupPlayer() {
            const isImposter = imposters.includes(currentPlayer);
            const playerRole = playerRoles[currentPlayer];
            const roleBadge = document.getElementById('roleBadge');
            const wordEl = document.getElementById('word');
            const hintContainer = document.getElementById('hintContainer');
            const playerNumEl = document.getElementById('playerNum');
            const playerNumPrefix = document.getElementById('playerNumPrefix');
            
            if (playerNames[currentPlayer]) {
                playerNumEl.textContent = playerNames[currentPlayer];
                playerNumPrefix.style.display = 'none';
            } else {
                playerNumEl.textContent = currentPlayer;
                playerNumPrefix.style.display = 'inline';
            }
            playerNumEl.className = `player-number-value player-color-${currentPlayer}`;
            
            let roleInfo = '';
            let wordSection = '';
            
            // Handle special roles
            if (playerRole === 'jester') {
                roleInfo = `
                    <div class="role-info-top jester">
                        <div class="role-description-compact">Win if YOU are voted out. You know everything.</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">üÉè The Jester</div>
                        <div class="word">${currentGameData.word}</div>
                        <div style="font-size: 14px; color: #a0aec0; margin-top: 10px;">Imposters' Hint:</div>
                        <div class="hints">
                            <div class="hint-tag">${imposterHint}</div>
                        </div>
                    </div>
                `;
            } else if (playerRole === 'doubleAgent') {
                roleInfo = `
                    <div class="role-info-top double-agent">
                        <div class="role-description-compact">Help imposters win. At least one must survive.</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);">üï∂Ô∏è Double Agent</div>
                        <div class="word">${currentGameData.word}</div>
                    </div>
                `;
            } else if (playerRole === 'protector') {
                roleInfo = `
                    <div class="role-info-top protector">
                        <div class="role-description-compact">Win with the citizens ONLY if your target survives voting.</div>
                        <div class="role-target-compact">Protect: ${getPlayerDisplay(roleAssignments[currentPlayer])}</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">üõ°Ô∏è The Protector</div>
                        <div class="word">${currentGameData.word}</div>
                    </div>
                `;
            } else if (playerRole === 'framer') {
                roleInfo = `
                    <div class="role-info-top framer">
                        <div class="role-description-compact">Win if your target IS voted out.</div>
                        <div class="role-target-compact">Frame: ${getPlayerDisplay(roleAssignments[currentPlayer])}</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);">üéØ The Framer</div>
                        <div class="word">${currentGameData.word}</div>
                    </div>
                `;
            } else if (playerRole === 'informant') {
                roleInfo = `
                    <div class="role-info-top informant">
                        <div class="role-description-compact">You know everything. Help citizens win.</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">üì° The Informant</div>
                        <div class="word">${currentGameData.word}</div>
                        <div style="font-size: 14px; color: #a0aec0; margin-top: 10px;">Imposters' Hint:</div>
                        <div class="hints">
                            <div class="hint-tag">${imposterHint}</div>
                        </div>
                    </div>
                `;
            } else if (playerRole === 'paranoid') {
                const synonymWord = synonymWords[currentGameData.word] ? synonymWords[currentGameData.word][Math.floor(Math.random() * synonymWords[currentGameData.word].length)] : currentGameData.word;
                roleInfo = `
                    <div class="role-info-top paranoid">
                        <div class="role-description-compact">You're a citizen. Your word is correct (trust it!).</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);">üò∞ The Paranoid</div>
                        <div class="word">${synonymWord}</div>
                    </div>
                `;
            } else if (playerRole === 'tourist') {
                roleInfo = `
                    <div class="role-info-top tourist">
                        <div class="role-description-compact">You're a citizen with NO word. Blend in!</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);">üß≥ The Tourist</div>
                        <div style="font-size: 20px; color: #9ca3af; margin-top: 15px; font-style: italic;">You have no word</div>
                        <div style="font-size: 14px; color: #718096; margin-top: 8px;">Listen carefully and blend in!</div>
                    </div>
                `;
            } else if (playerRole === 'sniper') {
                roleInfo = `
                    <div class="role-info-top sniper">
                        <div class="role-description-compact">If voted out, guess the real word to steal the win!</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #dc2626 0%, #991b1b 100%);">üéØ The Sniper</div>
                        <div style="font-size: 14px; color: #a0aec0; margin-top: 10px;">Your Hint:</div>
                        <div class="hints">
                            <div class="hint-tag">${imposterHint}</div>
                        </div>
                    </div>
                `;
            } else if (playerRole === 'lovers') {
                roleInfo = `
                    <div class="role-info-top lovers">
                        <div class="role-description-compact">Both of you must survive. Word doesn't matter.</div>
                        <div class="role-target-compact">Partner: ${getPlayerDisplay(roleAssignments[currentPlayer])}</div>
                    </div>
                `;
                
                const isLoverImposter = imposters.includes(currentPlayer);
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);">üíï Romeo & Juliet</div>
                        ${isLoverImposter ? `
                            <div style="font-size: 14px; color: #a0aec0; margin-top: 10px;">Your Hint:</div>
                            <div class="hints">
                                <div class="hint-tag">${imposterHint}</div>
                            </div>
                        ` : `<div class="word">${currentGameData.word}</div>`}
                    </div>
                `;
            } else if (playerRole === 'oracle') {
                roleInfo = `
                    <div class="role-info-top oracle">
                        <div class="role-description-compact">Your clue MUST be exactly ONE syllable! Win with the citizens, if you survive</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #14b8a6 0%, #0d9488 100%);">üîÆ The Oracle</div>
                        <div class="word">${currentGameData.word}</div>
                        <div style="font-size: 13px; color: #14b8a6; margin-top: 10px; font-weight: bold;">‚ö†Ô∏è One syllable only!</div>
                    </div>
                `;
            } else if (playerRole === 'mimic') {
                roleInfo = `
                    <div class="role-info-top mimic">
                        <div class="role-description-compact">Copy the player before you. Rhyme or synonym. Survive to win.</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);">üé≠ The Mimic</div>
                        <div style="font-size: 18px; color: #9ca3af; margin-top: 15px; font-style: italic;">No word given</div>
                        <div style="font-size: 14px; color: #718096; margin-top: 8px;">Listen to the player before you!</div>
                    </div>
                `;
            } else if (playerRole === 'lawyer') {
                roleInfo = `
                    <div class="role-info-top lawyer">
                        <div class="role-description-compact">Before voting: Choose one player to protect from elimination.</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">‚öñÔ∏è The Lawyer</div>
                        <div class="word">${currentGameData.word}</div>
                    </div>
                `;
            } else if (playerRole === 'thief') {
                roleInfo = `
                    <div class="role-info-top thief">
                        <div class="role-description-compact">Win if imposters win AND you survive.</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">ü¶π The Thief</div>
                        <div style="font-size: 14px; color: #a0aec0; margin-top: 10px;">Imposters' Hint:</div>
                        <div class="hints">
                            <div class="hint-tag">${imposterHint}</div>
                        </div>
                        <div style="font-size: 13px; color: #9ca3af; margin-top: 12px; font-style: italic;">Help imposters secretly</div>
                    </div>
                `;
            } else if (playerRole === 'twin') {
                const twinHint = roleAssignments['twinHint'] || currentGameData.hints[0];
                const otherTwinNum = roleAssignments[currentPlayer];
                roleInfo = `
                    <div class="role-info-top twin">
                        <div class="role-description-compact">Another Twin exists. Both must survive for you to win.</div>
                    </div>
                `;
                
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">üëØ The Twin</div>
                        <div class="word">${currentGameData.word}</div>
                        <div style="font-size: 14px; color: #a0aec0; margin-top: 10px;">Twin Hint (shared):</div>
                        <div class="hints">
                            <div class="hint-tag">${twinHint}</div>
                        </div>
                        <div style="font-size: 13px; color: #9ca3af; margin-top: 10px; font-style: italic;">Your twin doesn't know who you are</div>
                    </div>
                `;
            } else if (isImposter) {
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge role-imposter">üé≠ Imposter</div>
                        <div style="font-size: 14px; color: #a0aec0; margin-top: 10px; margin-bottom: 10px;">Your Hint:</div>
                        <div class="hints">
                            <div class="hint-tag">${imposterHint}</div>
                        </div>
                    </div>
                `;
            } else {
                wordSection = `
                    <div class="word-section">
                        <div class="role-badge role-citizen">‚úì Citizen</div>
                        <div class="word">${currentGameData.word}</div>
                    </div>
                `;
            }
            
            hintContainer.innerHTML = roleInfo + wordSection;
            
            hasRevealed = false;
            document.getElementById('nextButton').disabled = true;
        }

        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            particlesContainer.innerHTML = '';
            
            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                const size = Math.random() * 5 + 2;
                particle.style.width = size + 'px';
                particle.style.height = size + 'px';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.animationDuration = (Math.random() * 10 + 10) + 's';
                particle.style.animationDelay = Math.random() * 5 + 's';
                particlesContainer.appendChild(particle);
            }
        }

        const cover = document.getElementById('cover');
        
        function handleDragStart(clientY) {
            touchStartY = clientY;
            isDragging = true;
            cover.classList.remove('snapping');
        }
        
        function handleDragMove(clientY) {
            if (!isDragging) return;
            touchCurrentY = clientY;
            const diff = touchStartY - touchCurrentY;
            
            const translateY = Math.min(0, -diff);
            cover.style.transform = `translateY(${translateY}px)`;
            
            const quarterHeight = contentHeight / 4;
            if (diff >= quarterHeight && !hasRevealed) {
                hasRevealed = true;
                document.getElementById('nextButton').disabled = false;
            }
        }
        
        function handleDragEnd() {
            if (!isDragging) return;
            isDragging = false;
            
            cover.classList.add('snapping');
            cover.style.transform = 'translateY(0)';
            setTimeout(() => {
                cover.classList.remove('snapping');
            }, 400);
        }
        
        cover.addEventListener('touchstart', (e) => {
            e.preventDefault();
            handleDragStart(e.touches[0].clientY);
        });

        cover.addEventListener('touchmove', (e) => {
            e.preventDefault();
            handleDragMove(e.touches[0].clientY);
        });

        cover.addEventListener('touchend', (e) => {
            e.preventDefault();
            handleDragEnd();
        });

        cover.addEventListener('mousedown', (e) => {
            e.preventDefault();
            handleDragStart(e.clientY);
        });

        document.addEventListener('mousemove', (e) => {
            if (isDragging) {
                e.preventDefault();
                handleDragMove(e.clientY);
            }
        });

        document.addEventListener('mouseup', (e) => {
            if (isDragging) {
                e.preventDefault();
                handleDragEnd();
            }
        });

        document.getElementById('startButton').addEventListener('click', function() {
            if (imposterCount >= totalPlayers) {
                alert('Number of imposters must be less than total players!');
                return;
            }
            
            if (totalPlayers < 3) {
                alert('Need at least 3 players!');
                return;
            }
            
            document.getElementById('setupScreen').classList.add('hidden');
            currentPlayer = 1;
            initGame();
        });

        document.getElementById('nextButton').addEventListener('click', function() {
            if (!hasRevealed) return;
            
            currentPlayer++;
            
            if (currentPlayer > totalPlayers) {
                const randomPlayer = Math.floor(Math.random() * totalPlayers) + 1;
                document.getElementById('playerPicker').textContent = `Player ${randomPlayer}`;
                document.getElementById('endGameScreen').classList.remove('hidden');
                return;
            }
            
            cover.style.transform = 'translateY(0)';
            
            setTimeout(() => {
                setupPlayer();
            }, 50);
        });

        document.getElementById('revealButton').addEventListener('click', function() {
            document.getElementById('endGameScreen').classList.add('hidden');
            
            const imposterListEl = document.getElementById('imposterList');
            imposterListEl.innerHTML = imposters
                .sort((a, b) => a - b)
                .map(player => `<div class="imposter-item">Player ${player}</div>`)
                .join('');
            
            document.getElementById('revealScreen').classList.remove('hidden');
        });

        document.getElementById('restartButton').addEventListener('click', function() {
            document.getElementById('revealScreen').classList.add('hidden');
            document.getElementById('setupScreen').classList.remove('hidden');
            currentPlayer = 1;
        });

        initCarousels();
        createParticles();
    </script>
</body>
</html>
